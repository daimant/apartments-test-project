import{S as k,r as o,k as A}from "./pvkCK-i0.js";const v={selectedRooms:null,priceRange:{min:0,max:2e7,minLimit:0,maxLimit:2e7},areaRange:{min:0,max:100,minLimit:0,maxLimit:100}},S=k("apartments",()=>{const n=o([]),p=o(!1),a=o({...v}),i=o(null),r=o("asc"),g= e=>{i.value===e?r.value=r.value==="asc"?"desc":"asc":(i.value=e,r.value="asc")},f=A(()=>{let e=n.value;return a.value.selectedRooms!=null&&(e=e.filter(t=>t.rooms===a.value.selectedRooms)),a.value.priceRange&&(e=e.filter(t=>t.price>=a.value.priceRange.min&&t.price<=a.value.priceRange.max)),a.value.areaRange!=null&&(e=e.filter(t=>t.area>=a.value.areaRange.min&&t.area<=a.value.areaRange.max)),i.value&&(e=[...e].sort((t, l)=>{const c=i.value,s=t[c],m=l[c];return s===m?0:r.value==="asc"?s>m?1:-1:s<m?1:-1})),e}),u=()=>{a.value.selectedRooms=null,a.value.priceRange.minLimit=Math.min(...n.value.map(e=>e.price)),a.value.priceRange.min=a.value.priceRange.minLimit,a.value.priceRange.maxLimit=Math.max(...n.value.map(e=>e.price)),a.value.priceRange.max=a.value.priceRange.maxLimit,a.value.areaRange.minLimit=Math.min(...n.value.map(e=>e.area)),a.value.areaRange.min=a.value.areaRange.minLimit,a.value.areaRange.maxLimit=Math.max(...n.value.map(e=>e.area)),a.value.areaRange.max=a.value.areaRange.maxLimit},R=()=>{n.value.length?u():a.value={...v}},x=async()=>{const e=await d();n.value=[...n.value,...e],u()},d=async()=>{const e=[];for(let t=1; t<=4; t++)for(let l=1; l<=17; l+=3){const c=t===1?33:t===2?45:t===3?65:85,s=Math.floor(Math.random()*20)-10,m=Math.max(c+s,30),h=t===1?55e5:t===2?85e5:t===3?125e5:189e5,L=Math.floor(Math.random()*2e6)-1e6,M=Math.max(h+L,5e6);e.push({id:n.value.length+1,name:`${t}-комнатная №${100+n.value.length+e.length}`,rooms:t,area:m,floor:l,price:M,layoutImage:`/images/layout-${t}k.png`})}return e.slice(0,20)};return{apartments:n,isLoading:p,filters:a,filteredApartments:f,sortField:i,sortDirection:r,setLimits:u,resetFilters:R,loadApartments:x,setSort:g}});export{S as u};
