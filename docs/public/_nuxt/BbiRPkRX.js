import{a0 as L,r as m,k as d}from"./B5sqr9yN.js";const l={priceRange:{min:0,max:1e7,minLimit:0,maxLimit:1e7},areaRange:{min:0,max:100,minLimit:0,maxLimit:100}},y=L("apartments",()=>{const r=m([]),n=m(!1),e=m({...l}),o=d(()=>{let a=r.value;return e.value.selectedRooms!=null&&(a=a.filter(t=>t.rooms===e.value.selectedRooms)),e.value.priceRange&&(a=a.filter(t=>t.price>=e.value.priceRange.min&&t.price<=e.value.priceRange.max)),e.value.areaRange!=null&&(a=a.filter(t=>t.area>=e.value.areaRange.min&&t.area<=e.value.areaRange.max)),a}),s=()=>{e.value.priceRange.minLimit=Math.min(...r.value.map(a=>a.price)),e.value.priceRange.min=e.value.priceRange.minLimit,e.value.priceRange.maxLimit=Math.max(...r.value.map(a=>a.price)),e.value.priceRange.max=e.value.priceRange.maxLimit,e.value.areaRange.minLimit=Math.min(...r.value.map(a=>a.area)),e.value.areaRange.min=e.value.areaRange.minLimit,e.value.areaRange.maxLimit=Math.max(...r.value.map(a=>a.area)),e.value.areaRange.max=e.value.areaRange.maxLimit},c=()=>{e.value={...l}},u=async()=>{try{n.value=!0;const a=await fetch("/api/apartments.json");if(!a.ok)throw new Error("Ошибка загрузки данных");const t=r.value.length?await p():(await a.json()).apartments;r.value=[...r.value,...t],s()}catch(a){console.error("Ошибка загрузки квартир:",a)}finally{n.value=!1}},p=async()=>{const a=[];for(let t=1;t<=4;t++)for(let i=1;i<=10;i++){const v=t===1?33:t===2?45:t===3?65:85,g=Math.floor(Math.random()*20)-10,f=Math.max(v+g,30),R=t===1?55e5:t===2?85e5:t===3?125e5:189e5,h=Math.floor(Math.random()*2e6)-1e6,x=Math.max(R+h,5e6);a.push({id:r.value.length+1,name:`${t}-комнатная №${100+r.value.length}`,rooms:t,area:f,floor:i,price:x,layoutImage:`/images/layout-${t}k.png`})}return a};return{apartments:r,isLoading:n,filteredApartments:o,filters:e,loadApartments:u,resetFilters:c}});export{y as u};
